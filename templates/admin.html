<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>超级管理员面板</title>
    <link rel="stylesheet" href="/static/{{ theme }}/css/style.css" id="theme-link">
    <link rel="stylesheet" href="/static/{{ theme }}/css/admin_panel.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>超级管理员面板</h1>
            <div class="header-buttons">
                <select id="theme-selector" class="btn-secondary">
                    <option value="default">默认主题</option>
                    <option value="wooden">木质主题</option>
                </select>
                <button id="admin-menu-btn" class="btn-secondary">菜单</button>
            </div>
        </header>
        
        <!-- 抽屉式菜单 -->
        <div id="admin-drawer" class="drawer">
            <div class="drawer-header">
                <h2>导航菜单</h2>
                <button id="close-drawer-btn" class="btn-secondary">关闭</button>
            </div>
            <div class="drawer-content">
                <ul>
                    <li><a href="/">返回首页</a></li>
                    <li><a href="/admin">超级管理员面板</a></li>
                    <li><a href="/redoc" target="_blank">API 文档</a></li>
                    <li><a href="/logout">登出</a></li>
                </ul>
            </div>
        </div>
        
        <div id="drawer-overlay" class="drawer-overlay"></div>
        
        <div class="admin-container">
            <!-- 构建脚本管理 -->
            <div class="section">
                <h2>章节顺序配置</h2>
                <div class="form-group">
                    <label>章节顺序</label>
                    <ul id="chapters" class="chapter-list">
                        <!-- 章节将通过JavaScript动态添加 -->
                    </ul>
                </div>
                <div class="btn-group">
                    <button type="button" id="save-chapters-btn" class="btn-primary">保存章节顺序</button>
                    <button type="button" id="reset-chapters-btn" class="btn-secondary">重置</button>
                </div>
            </div>
            
            <!-- 图书生成 -->
            <div class="section">
                <h2>图书生成</h2>
                <div class="btn-group">
                    <button type="button" id="build-all-btn" class="btn-primary">生成所有格式 (EPUB & PDF)</button>
                    <button type="button" id="build-epub-btn" class="btn-secondary">生成 EPUB 格式</button>
                    <button type="button" id="build-pdf-btn" class="btn-secondary">生成 PDF 格式</button>
                </div>
            </div>
            
            <!-- Src目录管理 -->
            <div class="section">
                <h2>Src目录管理</h2>
                <div class="form-group">
                    <label for="src-upload">上传Src目录Zip包:</label>
                    <input type="file" id="src-upload" accept=".zip" />
                    <button type="button" id="upload-src-btn" class="btn-primary">上传</button>
                </div>
                <div class="btn-group">
                    <button type="button" id="download-src-btn" class="btn-secondary">下载Src目录</button>
                    <button type="button" id="reset-src-btn" class="btn-danger">重置Src目录</button>
                </div>
            </div>
            
            <!-- EPUB转换 -->
            <div class="section" id="epub-conversion-section">
                <h2>EPUB转换</h2>
                <div class="form-group">
                    <label for="epub-upload">上传EPUB文件:</label>
                    <input type="file" id="epub-upload" accept=".epub" />
                    <button type="button" id="convert-epub-btn" class="btn-primary">转换为Markdown</button>
                </div>
                <div id="conversion-result" class="hidden">
                    <p>转换完成！</p>
                    <button type="button" id="download-converted-btn" class="btn-secondary">下载转换结果</button>
                </div>
            </div>
            
            <!-- 手动备份 -->
            <div class="section" id="manual-backup-section">
                <h2>手动备份</h2>
                <div class="btn-group">
                    <button type="button" id="manual-backup-btn" class="btn-primary">手动备份Src目录</button>
                </div>
            </div>
            
            <!-- 备份文件管理 -->
            <div class="section">
                <h2>备份文件管理</h2>
                <div id="backup-files-container">
                    <p>正在加载备份文件列表...</p>
                </div>
            </div>
             
             <!-- 权限管理 -->
             <div class="section" id="permission-management-section">
                 <h2>权限管理</h2>
                 <div class="btn-group">
                     <button type="button" id="check-permissions-btn" class="btn-primary">检查权限</button>
                 </div>
                 <div id="permissions-container">
                     <p>正在加载权限信息...</p>
                 </div>
             </div>
            </div>
</div>
    
    <!-- 引入公共JavaScript函数库 -->
    <script src="/static/common/js/common.js"></script>
    <script src="/static/common/js/admin-common.js"></script>
    <script src="/static/common/js/main-shared.js"></script>
    <script src="/static/{{ theme }}/js/admin_panel.js"></script>
</body>
</html>